from pybricks.hubs import InventorHub
from pybricks.pupdevices import Motor, ColorSensor, UltrasonicSensor
from pybricks.parameters import Button, Color, Direction, Port, Side, Stop
from pybricks.robotics import DriveBase
from pybricks.tools import wait, StopWatch

hub = InventorHub()



STRAIGHT_SPEED = 900
STRAIGHT_ACC = 300
TURN_RATE = 80
TURN_ACC = 85



# VARIABLES (DRIVING MOTORS + DRIVEBASE)
# ==============================
left_motor = Motor(port=Port.D, positive_direction=Direction.COUNTERCLOCKWISE)
right_motor = Motor(port=Port.C)
drivebase = DriveBase(left_motor, right_motor, 56, 110)

# VARIABLES (ATTACHMENT MOTORS)
# =============================
left_attachent_motor = Motor(port=Port.B)
right_attachent_motor = Motor(port=Port.A)

# VARIABLES (SENSORS)
# ===================
right_color_sensor = ColorSensor(Port.E)
left_color_sensor = ColorSensor(Port.F)


drivebase.settings(straight_speed=STRAIGHT_SPEED,
                       straight_acceleration=STRAIGHT_ACC,
                       turn_rate=TURN_RATE, 
                       turn_acceleration=TURN_ACC)

def solve_mission_13():
    drivebase.straight(distance=700, then=Stop.HOLD, wait=True)
    left_attachent_motor.run_angle(speed=600, rotation_angle=-5, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=-90, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=250, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=-60, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=50, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=-75, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=20, then=Stop.HOLD, wait=True)
    left_attachent_motor.run_angle(speed=600, rotation_angle=-120, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=-20, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=75, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=-50, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=60, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=-250, then=Stop.HOLD, wait=True)
    drivebase.turn(angle=90, then=Stop.HOLD, wait=True)
    drivebase.straight(distance=-400, then=Stop.HOLD, wait=True)
